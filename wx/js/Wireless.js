import{e,v as l,I as a,j as s,g as t,i,u as o,y as n,k as d,t as r,z as u,A as c,K as p,f as g,l as v,B as m,w as b,F as h,r as _,o as f,C as y}from"./vue-vendor.js";import{u as x}from"./wireless2.js";import{c as w,a as k,T as G}from"./index.js";import{D as W}from"./Dialog.js";import{S as V}from"./Select.js";import{S as F,i as z,a as j}from"./validation.js";import{g as M}from"./wireless3.js";import{R as H}from"./radio.js";import{P as S}from"./power.js";import{W as C}from"./wifi.js";import{L as U}from"./lock.js";import{E,a as I}from"./eye.js";
/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=w("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),L=w("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),T={class:"space-y-6"},A={class:"card"},$={class:"flex items-center justify-between mb-5"},B={class:"flex items-center gap-3"},K={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-500/20 to-accent-600/10 flex items-center justify-center"},O={class:"space-y-4 pt-1"},P={class:"grid grid-cols-1 gap-4"},R={class:"form-group"},q={class:"form-label"},J={class:"form-group"},N={class:"form-label"},Q={class:"relative group/input"},X=["type"],Y={class:"grid grid-cols-1 gap-4"},Z={class:"form-group"},ee={class:"form-label"},le={class:"form-group"},ae={class:"form-label"},se={class:"form-group"},te={class:"form-label"},ie={class:"py-6 text-center text-slate-500"},oe={class:"card"},ne={class:"flex items-center justify-between mb-5"},de={class:"flex items-center gap-3"},re={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500/20 to-primary-600/10 flex items-center justify-center"},ue={class:"space-y-4 pt-1"},ce={class:"grid grid-cols-1 gap-4"},pe={class:"form-group"},ge={class:"form-label"},ve={class:"form-group"},me={class:"form-label"},be={class:"relative group/input"},he=["type"],_e={class:"grid grid-cols-1 gap-4"},fe={class:"form-group"},ye={class:"form-label"},xe={class:"form-group"},we={class:"form-label"},ke={class:"form-group"},Ge={class:"form-label"},We={class:"py-6 text-center text-slate-500"},Ve={class:"space-y-4"},Fe={class:"flex items-start gap-3 p-4 rounded-xl bg-warning-500/10 border border-warning-500/20"},ze=e({__name:"Wireless",setup(e){let w=null,ze=null;const je=_(!1),Me=_(!1),He=_({disabled_2g:"0",ssid_2g:"",key_2g:"",channel_2g:"",htmode_2g:"",hidden_2g:"",disabled_5g:"0",ssid_5g:"",key_5g:"",channel_5g:"",htmode_5g:"",hidden_5g:""}),Se=y(),Ce=x(),Ue=k(),Ee=_(!1),Ie=_({disabled_2g:"0",ssid_2g:"",key_2g:"",channel_2g:"",htmode_2g:"",hidden_2g:"",disabled_5g:"0",ssid_5g:"",key_5g:"",channel_5g:"",htmode_5g:"",hidden_5g:""}),De=[{value:"auto",label:"auto (推荐)"},...Array.from({length:13},(e,l)=>({value:String(l+1),label:`${l+1} (${2412+5*l} Mhz)`}))],Le=[{value:"auto",label:"auto (推荐)"},{value:"36",label:"36 (5180 Mhz)"},{value:"40",label:"40 (5200 Mhz)"},{value:"44",label:"44 (5220 Mhz)"},{value:"48",label:"48 (5240 Mhz)"},{value:"149",label:"149 (5745 Mhz)"},{value:"153",label:"153 (5765 Mhz)"},{value:"157",label:"157 (5785 Mhz)"},{value:"161",label:"161 (5805 Mhz)"}];function Te(){if(Object.keys(Ie.value).some(e=>Ie.value[e]!==He.value[e]))if("1"!==Ie.value.disabled_2g||"1"!==Ie.value.disabled_5g){if("0"===Ie.value.disabled_2g){if(!z(Ie.value.ssid_2g))return void Ue.error("请输入有效的2.4G WiFi名称 (1-32字符)");if(!Ie.value.key_2g)return void Ue.error("请输入2.4G WiFi密码");if(!j(Ie.value.key_2g))return void Ue.error("2.4G WiFi密码只能包含英文、数字和符号，长度8-63位")}if("0"===Ie.value.disabled_5g){if(!z(Ie.value.ssid_5g))return void Ue.error("请输入有效的5G WiFi名称 (1-32字符)");if(!Ie.value.key_5g)return void Ue.error("请输入5G WiFi密码");if(!j(Ie.value.key_5g))return void Ue.error("5G WiFi密码只能包含英文、数字和符号，长度8-63位")}Ee.value=!0}else Ue.error("至少需要开启一个无线网络");else Ue.error("配置未发生变化")}function Ae(){ze&&(clearTimeout(ze),ze=null),w&&(clearInterval(w),w=null)}async function $e(){Ee.value=!1,Ce.saveWirelessSettings(Ie.value).catch(()=>{}),Ue.startCountdown(60,()=>{Ae(),Ue.hideLoading(),Se.push({name:"status"})}),ze=setTimeout(()=>{w||(w=setInterval(async()=>{try{await M(),Ae(),Ue.hideLoading(),Ue.success("无线设置已应用"),Se.push({name:"status"})}catch{}},3e3))},3e4)}return l(async()=>{if(await Ce.fetchWirelessSettings(),Ce.wirelessSettings){const e=Ce.wirelessSettings,l={disabled_2g:"1"===e.disabled_2g?"1":"0",ssid_2g:e.ssid_2g||"",key_2g:e.key_2g||"",channel_2g:e.channel_2g||"auto",htmode_2g:e.htmode_2g||"HE40",hidden_2g:"1"===e.hidden_2g||"true"===e.hidden_2g?"1":"0",disabled_5g:"1"===e.disabled_5g?"1":"0",ssid_5g:e.ssid_5g||"",key_5g:e.key_5g||"",channel_5g:e.channel_5g||"auto",htmode_5g:e.htmode_5g||"HE160",hidden_5g:"1"===e.hidden_5g||"true"===e.hidden_5g?"1":"0"};Ie.value={...l},He.value={...l}}}),a(()=>{Ae()}),(e,l)=>(f(),s(h,null,[t("div",T,[t("div",A,[t("div",$,[t("div",B,[t("div",K,[i(o(H),{class:"w-5 h-5 text-accent-400"})]),l[16]||(l[16]=t("div",null,[t("h2",{class:"text-lg font-bold text-white"},"2.4G WiFi"),t("p",{class:"text-xs text-slate-500"},"2.4GHz 频段设置")],-1))]),t("div",{class:d(["flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer select-none touch-manipulation","0"===Ie.value.disabled_2g?"bg-success-500/20 text-success-400":"bg-slate-700/50 text-slate-500"]),onClick:l[0]||(l[0]=n(e=>Ie.value.disabled_2g="0"===Ie.value.disabled_2g?"1":"0",["stop","prevent"])),style:{"-webkit-tap-highlight-color":"transparent"}},[i(o(S),{class:"w-4 h-4"}),t("span",null,r("0"===Ie.value.disabled_2g?"已开启":"已关闭"),1)],2)]),t("div",{class:d(["grid-wrapper",{open:"0"===Ie.value.disabled_2g,"transition-enabled":!0}])},[t("div",null,[t("div",O,[t("div",P,[t("div",R,[t("label",q,[i(o(C),{class:"w-4 h-4"}),l[17]||(l[17]=t("span",null,"WiFi 名称",-1))]),u(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>Ie.value.ssid_2g=e),type:"text",class:"input",placeholder:"输入 2.4G WiFi 名称",autocomplete:"off"},null,512),[[c,Ie.value.ssid_2g]])]),t("div",J,[t("label",N,[i(o(U),{class:"w-4 h-4"}),l[18]||(l[18]=t("span",null,"WiFi 密码",-1))]),t("div",Q,[u(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>Ie.value.key_2g=e),type:je.value?"text":"password",class:"input pr-10",placeholder:"输入 2.4G WiFi 密码",autocomplete:"off"},null,8,X),[[p,Ie.value.key_2g]]),t("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-primary-400 p-1 transition-colors",onClick:l[3]||(l[3]=e=>je.value=!je.value)},[(f(),g(v(je.value?o(E):o(I)),{class:"w-4 h-4"}))])])])]),t("div",Y,[t("div",Z,[t("label",ee,[i(o(L),{class:"w-4 h-4"}),l[19]||(l[19]=t("span",null,"信道",-1))]),i(V,{modelValue:Ie.value.channel_2g,"onUpdate:modelValue":l[4]||(l[4]=e=>Ie.value.channel_2g=e),options:De,placeholder:"选择 2.4G 信道",label:"选择 2.4G 无线信道"},null,8,["modelValue"])]),t("div",le,[t("label",ae,[i(o(D),{class:"w-4 h-4"}),l[20]||(l[20]=t("span",null,"带宽",-1))]),i(V,{modelValue:Ie.value.htmode_2g,"onUpdate:modelValue":l[5]||(l[5]=e=>Ie.value.htmode_2g=e),options:[{value:"HE40",label:"40 MHz"},{value:"HE20",label:"20 MHz"}],placeholder:"选择频段带宽",label:"选择 2.4G 频段带宽"},null,8,["modelValue"])]),t("div",se,[t("label",te,[i(o(E),{class:"w-4 h-4"}),l[21]||(l[21]=t("span",null,"隐藏网络",-1))]),i(V,{modelValue:Ie.value.hidden_2g,"onUpdate:modelValue":l[6]||(l[6]=e=>Ie.value.hidden_2g=e),options:[{value:"0",label:"否"},{value:"1",label:"是"}],placeholder:"是否隐藏 SSID",label:"选择是否隐藏 2.4G SSID"},null,8,["modelValue"])])])])])],2),t("div",{class:d(["grid-wrapper",{open:"1"===Ie.value.disabled_2g,"transition-enabled":!0}])},[t("div",null,[t("div",ie,[i(o(H),{class:"w-8 h-8 mx-auto mb-2 opacity-50"}),l[22]||(l[22]=t("p",null,"2.4G WiFi 已关闭",-1))])])],2)]),t("div",oe,[t("div",ne,[t("div",de,[t("div",re,[i(o(H),{class:"w-5 h-5 text-primary-400"})]),l[23]||(l[23]=t("div",null,[t("h2",{class:"text-lg font-bold text-white"},"5G WiFi"),t("p",{class:"text-xs text-slate-500"},"5GHz 频段设置")],-1))]),t("div",{class:d(["flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer select-none touch-manipulation","0"===Ie.value.disabled_5g?"bg-success-500/20 text-success-400":"bg-slate-700/50 text-slate-500"]),onClick:l[7]||(l[7]=n(e=>Ie.value.disabled_5g="0"===Ie.value.disabled_5g?"1":"0",["stop","prevent"])),style:{"-webkit-tap-highlight-color":"transparent"}},[i(o(S),{class:"w-4 h-4"}),t("span",null,r("0"===Ie.value.disabled_5g?"已开启":"已关闭"),1)],2)]),t("div",{class:d(["grid-wrapper",{open:"0"===Ie.value.disabled_5g,"transition-enabled":!0}])},[t("div",null,[t("div",ue,[t("div",ce,[t("div",pe,[t("label",ge,[i(o(C),{class:"w-4 h-4"}),l[24]||(l[24]=t("span",null,"WiFi 名称",-1))]),u(t("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>Ie.value.ssid_5g=e),type:"text",class:"input",placeholder:"输入 5G WiFi 名称",autocomplete:"off"},null,512),[[c,Ie.value.ssid_5g]])]),t("div",ve,[t("label",me,[i(o(U),{class:"w-4 h-4"}),l[25]||(l[25]=t("span",null,"WiFi 密码",-1))]),t("div",be,[u(t("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>Ie.value.key_5g=e),type:Me.value?"text":"password",class:"input pr-10",placeholder:"输入 5G WiFi 密码",autocomplete:"off"},null,8,he),[[p,Ie.value.key_5g]]),t("button",{type:"button",class:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-primary-400 p-1 transition-colors",onClick:l[10]||(l[10]=e=>Me.value=!Me.value)},[(f(),g(v(Me.value?o(E):o(I)),{class:"w-4 h-4"}))])])])]),t("div",_e,[t("div",fe,[t("label",ye,[i(o(L),{class:"w-4 h-4"}),l[26]||(l[26]=t("span",null,"信道",-1))]),i(V,{modelValue:Ie.value.channel_5g,"onUpdate:modelValue":l[11]||(l[11]=e=>Ie.value.channel_5g=e),options:Le,placeholder:"选择 5G 信道",label:"选择 5G 无线信道"},null,8,["modelValue"])]),t("div",xe,[t("label",we,[i(o(D),{class:"w-4 h-4"}),l[27]||(l[27]=t("span",null,"带宽",-1))]),i(V,{modelValue:Ie.value.htmode_5g,"onUpdate:modelValue":l[12]||(l[12]=e=>Ie.value.htmode_5g=e),options:[{value:"HE160",label:"160 MHz"},{value:"HE80",label:"80 MHz"},{value:"HE40",label:"40 MHz"},{value:"HE20",label:"20 MHz"}],placeholder:"选择频段带宽",label:"选择 5G 频段带宽"},null,8,["modelValue"])]),t("div",ke,[t("label",Ge,[i(o(E),{class:"w-4 h-4"}),l[28]||(l[28]=t("span",null,"隐藏网络",-1))]),i(V,{modelValue:Ie.value.hidden_5g,"onUpdate:modelValue":l[13]||(l[13]=e=>Ie.value.hidden_5g=e),options:[{value:"0",label:"否"},{value:"1",label:"是"}],placeholder:"是否隐藏 SSID",label:"选择是否隐藏 5G SSID"},null,8,["modelValue"])])])])])],2),t("div",{class:d(["grid-wrapper",{open:"1"===Ie.value.disabled_5g,"transition-enabled":!0}])},[t("div",null,[t("div",We,[i(o(H),{class:"w-8 h-8 mx-auto mb-2 opacity-50"}),l[29]||(l[29]=t("p",null,"5G WiFi 已关闭",-1))])])],2)]),t("button",{class:"btn btn-primary w-full py-4 text-base",onClick:Te},[i(o(F),{class:"w-5 h-5"}),l[30]||(l[30]=m(" 保存并应用设置 ",-1))])]),i(W,{visible:Ee.value,title:"保存确认",icon:o(F),onClose:l[15]||(l[15]=e=>Ee.value=!1)},{footer:b(()=>[t("button",{class:"btn btn-secondary flex-1",onClick:l[14]||(l[14]=e=>Ee.value=!1)},"取消"),t("button",{class:"btn btn-primary flex-1",onClick:$e},[i(o(F),{class:"w-4 h-4"}),l[33]||(l[33]=m(" 确定保存 ",-1))])]),default:b(()=>[t("div",Ve,[l[32]||(l[32]=t("p",{class:"text-slate-300"},"确定要保存这些更改吗？",-1)),t("div",Fe,[i(o(G),{class:"w-5 h-5 text-warning-400 flex-shrink-0 mt-0.5"}),l[31]||(l[31]=t("div",{class:"text-sm"},[t("p",{class:"text-warning-300 font-medium mb-1"},"保存后 WiFi 将会重启"),t("p",{class:"text-slate-400"},"系统重启期间，WiFi连接将会断开。")],-1))])])]),_:1},8,["visible","icon"])],64))}});
/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{ze as default};
